<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="bootstrap.min.css" type="text/css">
	<title> Express Music Server </title>
<<<<<<< HEAD
	<style>
		body {
		
			padding: 30px;
			text-align: center;
		}
		.contents{
			background: #fff;
			padding: 20px;
			margin: auto;
			opacity: 0.7;
			text-align: center;
		}
		.contents button{
			width: 100px;
			opacity: 0.9;
			background: #000;
		}
		h1 {
			color: #333333;
			font-size: 60px;
		}
		h2 {
			color: #2e2e2e;
			font-size: 28px;
		}
		a {
			color: #2f2f2f;
			font-size: 18px
		}
		
	</style>
=======
	<link rel="stylesheet" href="css/style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.8/vue.min.js"></script>
>>>>>>> b68e22523a7d72b7e2c0c032847c42a944019786
</head>
<body>
	<div class="container contents">
	<h1>  Flow </h1>

		<div class="row">
			<div class="col-md-4">
				<img class="img img-responsive" src="song.png"/>
<<<<<<< HEAD
				<h2> Music1.mp3</h2>
				<a href="http://localhost:7777/music?id=music1.mp3"> <button class="btn btn-success"> Play </button>	</a> <hr>
=======
				<h2> hello.mp3 </h2>
				
				<a href="http://localhost:7777/music?id=music1.mp3" > <button class="btn btn-success"> Play </button>	</a> <hr>
			
>>>>>>> b68e22523a7d72b7e2c0c032847c42a944019786
			</div>
		</div>
	</div>

	<div id="appMusicPlayer">
		
		  <h1>{{ title }}</h1>
		  <h2>{{ artist }}</h2>
		</div>
		
		
		<div class="player">
			<audio id="music">
				<source src="http://localhost:7777/music?id=interlude.mp3"/>
			  Your browser does not support the audio element.
			  
			  </audio>
			  <button id="pButton" class="play" onclick="playAudio()"></button>
			  <div id="timeline">
				<div id="playhead"></div>
			</div>
		</div>	
	

<!-- Play/pause -->
<script>
	

		
		
		
		
		
	
	var music = document.getElementById('music'); // id for audio element
	var duration = music.duration; // Duration of audio clip, calculated here for embedding purposes
	var pButton = document.getElementById('pButton'); // play button
	var playhead = document.getElementById('playhead'); // playhead
	var timeline = document.getElementById('timeline'); // timeline
	
	// timeline width adjusted for playhead
	var timelineWidth = timeline.offsetWidth - playhead.offsetWidth;
	
	// play button event listenter
	pButton.addEventListener("click", play);
	
	// timeupdate event listener
	music.addEventListener("timeupdate", timeUpdate, false);
	
	// makes timeline clickable
	timeline.addEventListener("click", function(event) {
		moveplayhead(event);
		music.currentTime = duration * clickPercent(event);
	}, false);
	
	// returns click as decimal (.77) of the total timelineWidth
	function clickPercent(event) {
		return (event.clientX - getPosition(timeline)) / timelineWidth;
	}
	
	// makes playhead draggable
	playhead.addEventListener('mousedown', mouseDown, false);
	window.addEventListener('mouseup', mouseUp, false);
	
	// Boolean value so that audio position is updated only when the playhead is released
	var onplayhead = false;
	
	// mouseDown EventListener
	function mouseDown() {
		onplayhead = true;
		window.addEventListener('mousemove', moveplayhead, true);
		music.removeEventListener('timeupdate', timeUpdate, false);
	}
	
	// mouseUp EventListener
	// getting input from all mouse clicks
	function mouseUp(event) {
		if (onplayhead == true) {
			moveplayhead(event);
			window.removeEventListener('mousemove', moveplayhead, true);
			// change current time
			music.currentTime = duration * clickPercent(event);
			music.addEventListener('timeupdate', timeUpdate, false);
		}
		onplayhead = false;
	}
	// mousemove EventListener
	// Moves playhead as user drags
	function moveplayhead(event) {
		var newMargLeft = event.clientX - getPosition(timeline);
	
		if (newMargLeft >= 0 && newMargLeft <= timelineWidth) {
			playhead.style.marginLeft = newMargLeft + "px";
		}
		if (newMargLeft < 0) {
			playhead.style.marginLeft = "0px";
		}
		if (newMargLeft > timelineWidth) {
			playhead.style.marginLeft = timelineWidth + "px";
		}
	}
	
	// timeUpdate
	// Synchronizes playhead position with current point in audio
	function timeUpdate() {
		var playPercent = timelineWidth * (music.currentTime / duration);
		playhead.style.marginLeft = playPercent + "px";
		if (music.currentTime == duration) {
			pButton.className = "";
			pButton.className = "play";
		}
	}
	
	//Play and Pause
	function play() {
		// start music
		if (music.paused) {
			music.play();
			// remove play, add pause
			pButton.className = "";
			pButton.className = "pause";
		} else { // pause music
			music.pause();
			// remove pause, add play
			pButton.className = "";
			pButton.className = "play";
		}
	}
	
	// Gets audio file duration
	music.addEventListener("canplaythrough", function() {
		duration = music.duration;
	}, false);
	
	// getPosition
	// Returns elements left position relative to top-left of viewport
	function getPosition(el) {
		return el.getBoundingClientRect().left;
	}
	
	
</script>
	<script src="js/vueMusicPlayer.js"></script>
	
</body>
</html>
